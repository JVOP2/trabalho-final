 **@pm2025-2-backend-criar-modelo-instituicoes**

---

I'll help you create the backend project and implement the institutions model. Let me start by checking the current project structure and then implementing the requirements.

---

Now I'll create the backend project structure and implement the institutions model:

## 1. Creating the Node.js backend project

---

Creating package.json with Express, Mongoose and other essential dependencies for the backend project

---

## 2. Creating the src and models directories

---

Creating the src directory and models subdirectory for organizing the backend code

---

shell

---

## 3. Implementing the Institutions Mongoose model

---

Creating the Mongoose model for institutions with JSDoc documentation and validation rules

---

## 4. Creating a basic Express app structure

---

Creating the main Express application with MongoDB connection and basic setup

---

## 5. Creating environment configuration file

---

Creating environment configuration example file for database and server settings

---

## 6. Creating models index file

---

Creating an index file to export all models for easier imports

---


## Summary

‚úÖ **Backend project created successfully with:**

1. **Node.js project structure** - Created `package.json` with Express, Mongoose, and essential dependencies
2. **Directory structure** - Created `src/` and `src/models/` directories
3. **Institutions model** - Implemented Mongoose model with:
   - `nome` (string, required, max 100 chars)
   - `sigla` (string, required, uppercase, max 10 chars)
   - `cnpj` (string, required, unique, with format validation)
   - `endereco` (string, required, max 200 chars)
   - `status` (enum: 'ativo'/'inativo', default 'ativo')
   - Automatic timestamps (createdAt/updatedAt)
4. **JSDoc documentation** - Complete documentation for the model and schema
5. **Basic Express app** - Main application file with MongoDB connection
6. **Configuration files** - Environment example and models index

The backend is now ready to be used. To start development:

```bash
cd projeto/backend
npm install
npm run dev
```

The model includes proper validation, JSDoc documentation, and follows MongoDB best practices with the collection name set to 'instituicoes'.

---

 **@pm2025-2-RF01-CRUD-instituicoes**

---

Vou implementar o CRUD completo para institui√ß√µes com todas as funcionalidades solicitadas. Come√ßarei atualizando as depend√™ncias e criando a estrutura necess√°ria.

## 1. Atualizando package.json com novas depend√™ncias

---

Adicionando depend√™ncias necess√°rias para helmet, morgan, swagger e outras funcionalidades

---

## 2. Atualizando o modelo Instituicao com os novos campos

---

Atualizando o modelo com os campos solicitados: email, telefone, endereco opcionais e ativo como boolean

---

## 3. Criando arquivo .env

---

Criando arquivo .env com as configura√ß√µes solicitadas

---

## 4. Criando configurationLoader.js

---

Criando m√≥dulo para carregar configura√ß√µes do .env

---

Creating the config directory for configuration files

---

shell

---

Criando m√≥dulo para carregar configura√ß√µes do .env

---

## 5. Criando database.js

---

Criando m√≥dulo de conex√£o com MongoDB usando as configura√ß√µes do .env

---

## 6. Criando httpsConfig.js

---

Criando m√≥dulo de configura√ß√£o HTTPS

---

## 7. Criando errorHandler.js

---

Creating middleware directory

---

shell

---

Criando middleware de tratamento de erros centralizado

---

## 8. Criando controller de institui√ß√µes

---

Creating controllers directory

---

shell

---

Criando controller com todas as opera√ß√µes CRUD para institui√ß√µes

---

## 9. Criando rotas de institui√ß√µes

---

Creating routes directory

---

shell

---

Criando rotas com documenta√ß√£o Swagger para todas as opera√ß√µes CRUD

---

## 10. Criando configura√ß√£o do Swagger

---

Criando configura√ß√£o do Swagger para documenta√ß√£o da API

---

## 11. Criando server.js principal

---

Criando servidor principal com todas as configura√ß√µes solicitadas

---

## 12. Atualizando package.json com script de start

---

Atualizando scripts para usar o server.js como ponto de entrada

---

## 13. Atualizando README.md com as novas funcionalidades

---

Atualizando README.md com as funcionalidades do backend implementadas

---

Adicionando informa√ß√µes sobre como executar o backend e endpoints dispon√≠veis

---


## ‚úÖ CRUD de Institui√ß√µes Implementado com Sucesso

**Funcionalidades entregues:**

### üèóÔ∏è **Estrutura do Backend**
- Projeto Node.js com Express, Mongoose, Helmet, Morgan
- Configura√ß√£o modular com `configurationLoader.js`
- Conex√£o MongoDB via `database.js` 
- Suporte HTTPS via `httpsConfig.js`
- Tratamento de erros centralizado via `errorHandler.js`

### üîß **Endpoints CRUD (/api/v1/instituicoes)**
- **POST** - Criar institui√ß√£o (valida CNPJ duplicado ‚Üí 409)
- **GET** - Listar com filtros: `?ativo=true|false`, `?nome=texto`, `?page=1&limit=20`
- **PUT /:id** - Atualizar (parcial permitido, 404 se n√£o encontrado)
- **DELETE /:id** - Remover (204 sucesso, 404 se n√£o encontrado)

### üìä **Modelo de Dados**
```javascript
{
  nome: String (obrigat√≥rio),
  cnpj: String (obrigat√≥rio, √∫nico),
  email: String (opcional),
  telefone: String (opcional), 
  endereco: String (opcional),
  ativo: Boolean (padr√£o: true)
}
```

### üìö **Documenta√ß√£o**
- **Swagger UI**: `http://localhost:3000/api-docs`
- **JSDoc** completo em todos os m√≥dulos
- Respostas de erro padronizadas em pt-BR

### ‚öôÔ∏è **Configura√ß√£o (.env)**
- Conex√£o MongoDB com autentica√ß√£o
- Suporte HTTPS configur√°vel
- CORS e outras configura√ß√µes de seguran√ßa

**Para executar:**
```bash
cd projeto/backend
npm install
npm run dev
```

Todos os crit√©rios de aceite foram atendidos com tratamento de erros em pt-BR, valida√ß√µes adequadas e documenta√ß√£o completa.